---
layout: post
title: "Linux Sudo[CVE-2019-14287]漏洞复现"
date: 2019-10-16
description: "Web安全"
tag: Web安全
---
---

### 前言

这段时间 Linux Sudo 爆出了一个漏洞， <br>

就是低权限用户可以调用 **sudo** 这个命令使用root用户的权限 <br>

---


### 目录：

* <a href="#a" target="_self">漏洞复现</a>
* <a href="#b" target="_self">防御方法</a>
* <a href="#c" target="_self">参考文献</a>
* <a href="#zg" target="_self">总结</a>

-------


### <span id = "a">漏洞复现</span>

实验环境：centos6.8 + Sudo 版本 1.8.6p3 <br>

首先创建一个普通用户 **user** <br>

然后在 **sudoers** 文件下配置 **ALL** 关键字 <br>

命令： <br>

```bash
vim /etc/sudoers
```

然后给 user 用户增加一条 <br>

```bash
user    ALL=(ALL:ALL)   ALL
```
<br>

![images](/images/2019-10-16/01.png)

-----

来测试添加用户， <br>

直接 **useradd** 的话，显示权限不够 <br>

这个时候我们可以直接调用 **udo** 进行添加 <br>

![images](/images/2019-10-16/02.png)

-----

这样就复现成功了，<br>

只要调用 **sudo** ，啥事都能干，<br>

不过前提是要配置 ALL 关键字。

-----


### <span id = "b">防御方法</span>


**1.8.28** 之前的所有 **Sudo** 版本均受影响，<br>

只要升级到比 **1.8.28** 高的版本就没事了。<br>

但是如果不想升级版本那怎么防御呢？？ <br>

这个漏洞需要配置关键字 **ALL** 才能触发 <br>

所以只要不配置就行了 <br>

我们将用户切换到 **user1** <br>

**user1** 用户是没有配置 关键字 **ALL** 的 <br>

然后的话，他会显示 **user1** 不在 **sudoers** 文件中。此事将被报告。<br>

![images](/images/2019-10-16/03.png)

-----


### <span id = "c">参考文献</span>

Linux Sudo被曝漏洞，可导致用户以root权限运行命令： <br>

```
https://www.freebuf.com/news/216821.html
```

-----


### <span id = "zg">总结</span>

完。 <br>

--------
